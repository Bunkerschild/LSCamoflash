<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LSCamoflash</title>
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="/css/bootstrap-reboot.min.css">
    
    <!-- jQuery UI CSS -->
    <link rel="stylesheet" href="/css/jquery-ui.min.css">
    <link rel="stylesheet" href="/css/jquery-ui.structure.min.css">
    <link rel="stylesheet" href="/css/jquery-ui.theme.min.css">
    
    <!-- LSCamoflash CSS -->
    <link rel="stylesheet" href="/css/lscamoflash.css">

</head>
<body>
    <!-- Background-Image -->
    <div id="background-image"></div>
    
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top d-none" id="navbarLogin">
        <div class="container">
            <a class="navbar-brand" href="/">LSCamoflash</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item active"><a class="nav-link" href="#login">Login</a></li>
                    <li class="nav-item"><a class="nav-link" href="https://github.com/Bunkerschild/LSCamoflash" target="_blank">Github</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top d-none" id="navbarLogout">
        <div class="container">
            <a class="navbar-brand" href="/">LSCamoflash<br/><span id="version"></span></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item active"><a class="nav-link" href="#cam">Cam</a></li>
                    <li id="recordingMenuEntry" class="nav-item d-none"><a class="nav-link" href="#recording">Recording</a></li>
                    <li id="settingsMenuEntry" class="nav-item d-none"><a class="nav-link" href="#settings">Settings</a></li>
                    <li class="nav-item"><a class="nav-link" href="#password">Password</a></li>
                    <li class="nav-item"><a class="nav-link" href="#logout">Logout</a></li>
                    <li class="nav-item"><a class="nav-link" href="https://github.com/Bunkerschild/LSCamoflash" target="_blank">Github</a></li>
                </ul>
            </div>
        </div>
    </nav>
    
    <!-- Wait -->
    <div class="container-box container-loading" id="containerWait">
        <h2 class="text-center" id="loading-label">L o a d i n g</h2>
        <h3 class="text-center" id="loading">&nbsp;</h3>
    </div>

    <!-- Login Form -->
    <div class="container-box d-none" id="containerLogin">
        <h2 class="text-center">Login</h2>
        <form id="loginForm">
            <div class="mb-3">
                <label for="username" class="form-label">Username</label>
                <input type="text" class="form-control" id="username" placeholder="Enter your username" required>
            </div>
            <div class="mb-3">
                <label for="password" class="form-label">Password</label>
                <input type="password" class="form-control" id="password" placeholder="Enter your password" required>
            </div>
            <button type="submit" class="btn btn-primary w-100">Login</button>
        </form>
    </div>
    
    <!-- Password Form -->
    <div class="container-box d-none" id="containerPassword">
        <h2 class="text-center">Change password</h2>
        <div id="passwordForm">
            <div class="mb-3">
                <label for="password1" class="form-label">New password</label>
                <input type="password" class="form-control" id="password1" placeholder="Enter new password" required>
            </div>
            <div class="mb-3">
                <label for="password2" class="form-label">Repeat password</label>
                <input type="password" class="form-control" id="password2" placeholder="Enter password again" required>
            </div>
            <button type="button" id="updatePasswd" class="btn btn-danger w-100">Update password</button>
        </div>
    </div>
        
    <!-- Camera Recording -->
    <div class="container-box d-none" id="containerRecording">
        <h2 class="text-center">Camera Recording</h2>
        <div id="cameraRecordingAcc">
                <h3>Recordings</h3>
                <div>
                        <video id="recordingVideo" controls></video>
                        <div class="mb-3 text-center">
                                <label for="recordingDate" class="form-label">Date of recording</label>
                                <select id="recordingDate" class="recordingSelect"></select>
                                <label for="recordingFile" class="form-label">Time</label>
                                <select id="recordingFile" class="recordingSelect"></select>
                        </div>
                        <div class="mb-3 text-center">
                                <button type="button" id="updateRecordingList" class="mp4-btn btn btn-secondary w-33">&#8635; Update</button>
                                <button type="button" id="playRecording" class="mp4-btn btn btn-success w-33">&#9658; Play</button>
                                <button type="button" id="downloadRecording" class="mp4-btn btn btn-primary w-33">&#10515; Download</button>
                        </div>
                        <div class="mb-3 text-center">
                                <button type="button" id="deleteRecording" class="mp4-btn btn btn-warning w-33">&#10007; Delete recording</button>
                                <button type="button" id="deleteDaysRecordings" class="mp4-btn btn btn-warning w-33">&#10008; Delete hole day</button>
                                <button type="button" id="deleteAllRecordings" class="mp4-btn btn btn-danger w-33">&#9760; Delete anything</button>
                        </div>
                </div>
                <h3>Snapshots</h3>
                <div>
                        <img title="Snapshot" alt="Snapshot" id="snapshotImage" border="1"/>
                        <div class="mb-3 text-center">
                                <label for="snapshotDate" class="form-label">Date of snapshot</label>
                                <select id="snapshotDate" class="snapshotSelect"></select>
                                <label for="snapshotFile" class="form-label">Time</label>
                                <select id="snapshotFile" class="snapshotSelect"></select>
                        </div>
                        <div class="mb-3 text-center">
                                <button type="button" id="updateSnapshotList" class="jpg-btn btn btn-secondary w-33">&#8635; Update</button>
                                <button type="button" id="openSnapshot" class="jpg-btn btn btn-success w-33">&#9658; Open</button>
                                <button type="button" id="downloadSnapshot" class="jpg-btn btn btn-primary w-33">&#10515; Download</button>
                        </div>
                        <div class="mb-3 text-center">
                                <button type="button" id="deleteSnapshot" class="jpg-btn btn btn-warning w-33">&#10007; Delete snapshot</button>
                                <button type="button" id="deleteDaysSnapshots" class="jpg-btn btn btn-warning w-33">&#10008; Delete hole day</button>
                                <button type="button" id="deleteAllSnapshots" class="jpg-btn btn btn-danger w-33">&#9760; Delete anything</button>
                        </div>
                </div>
        </div>
    </div>

    <!-- Camera Settings -->
    <div class="container-box d-none" id="containerSettings">
        <h2 class="text-center">Camera Settings</h2>
        <div id="cameraSettingsAcc">
                <h3>General Settings</h3>
                <div>
                        <div class="mb-3">
                                <label for="ledEnable" class="form-label">Enable LED</label>
                                <input type="checkbox" class="form-check-input" id="ledEnable">
                        </div>
                        <div class="mb-3">
                                <label for="rotate180" class="form-label">Rotate 180°</label>
                                <input type="checkbox" class="form-check-input" id="rotate180">
                        </div>
                        <div class="mb-3">
                                <label for="osdTime" class="form-label">Display Time OSD</label>
                                <input type="checkbox" class="form-check-input" id="osdTime">
                        </div>
                </div>
                <h3>Video Settings</h3>
                <div>
                        <div class="mb-3">
                                <label for="basicAntiFlicker" class="form-label">Anti-Flicker Mode</label><br>
                                <select class="form-select" id="basicAntiFlicker">
                                        <option value="0">Off</option>
                                        <option value="1">50Hz</option>
                                        <option value="2">60Hz</option>
                                </select>
                        </div>
                        <div class="mb-3">
                                <label for="wdrEnable" class="form-label">Enable WDR (Wide Dynamic Range)</label>
                                <input type="checkbox" class="form-check-input" id="wdrEnable">
                        </div>
                        <div class="mb-3">
                                <label for="videoBrightness" class="form-label">Brightness</label>
                                <input type="range" class="form-range" id="videoBrightness" min="0" max="100">
                        </div>
                        <div class="mb-3">
                                <label for="videoContrast" class="form-label">Contrast</label>
                                <input type="range" class="form-range" id="videoContrast" min="0" max="100">
                        </div>
                        <div class="mb-3">
                                <label for="videoSharpness" class="form-label">Sharpness</label>
                                <input type="range" class="form-range" id="videoSharpness" min="0" max="100">
                        </div>
                </div>
                <h3>Night Mode & Infrared</h3>
                <div>
                        <div class="mb-3">
                                <label for="nightMode" class="form-label">Night Mode</label><br>
                                <select class="form-select" id="nightMode">
                                        <option value="0">Off</option>
                                        <option value="1">On</option>
                                </select>
                        </div>
                        <div class="mb-3">
                                <label for="nightVisionMode" class="form-label">Night Vision Mode</label><br>
                                <select class="form-select" id="nightVisionMode">
                                        <option value="0">Off</option>
                                        <option value="1">On</option>
                                </select>
                        </div>
                </div>
                <h3>Motion Detection & Alarms</h3>
                <div>
                        <div class="mb-3">
                                <label for="alarmEnable" class="form-label">Enable Alarm</label>
                                <input type="checkbox" class="form-check-input" id="alarmEnable">
                        </div>
                        <div class="mb-3">
                                <label for="humanFilterEnable" class="form-label">Enable Human Filter</label>
                                <input type="checkbox" class="form-check-input" id="humanFilterEnable">
                        </div>
                        <div class="mb-3">
                                <label for="alarmSensitivity" class="form-label">Alarm Sensitivity</label><br>
                                <select class="form-select" id="alarmSensitivity">
                                        <option value="1">Low</option>
                                        <option value="2">Medium</option>
                                        <option value="3">High</option>
                                </select>
                        </div>
                        <div class="mb-3">
                                <label for="alarmSirenEnable" class="form-label">Enable Alarm Siren</label>
                                <input type="checkbox" class="form-check-input" id="alarmSirenEnable">
                        </div>
                        <div class="mb-3">
                                <label for="mdAreaEnable" class="form-label">Enable Motion Detection Area</label>
                                <input type="checkbox" class="form-check-input" id="mdAreaEnable">
                        </div>
                        <div class="mb-3">
                                <label for="mdAreaRect" class="form-label">Motion Detection Area (x,y,w,h)</label>
                                <input type="text" class="form-control" id="mdAreaRect" placeholder="0,0,100,100">
                        </div>
                        <div class="mb-3">
                                <label for="soundDetectEnable" class="form-label">Enable Sound Detection</label>
                                <input type="checkbox" class="form-check-input" id="soundDetectEnable">
                        </div>
                        <div class="mb-3">
                                <label for="soundSensitivity" class="form-label">Sound Sensitivity</label><br>
                                <select class="form-select" id="soundSensitivity">
                                        <option value="0">Low</option>
                                        <option value="1">Medium</option>
                                        <option value="2">High</option>
                                </select>
                        </div>
                        <div class="mb-3">
                                <label for="pirSwitch" class="form-label">PIR Sensor</label><br>
                                <select class="form-select" id="pirSwitch">
                                        <option value="0">Off</option>
                                        <option value="1">Low</option>
                                        <option value="2">High</option>
                                </select>
                        </div>
                        <div class="mb-3">
                                <label for="audibleAlarmEnable" class="form-label">Enable Audible Alarm</label>
                                <input type="checkbox" class="form-check-input" id="audibleAlarmEnable">
                        </div>
                        <div class="mb-3">
                                <label for="objectOutlineSwitch" class="form-label">Show Object Outlines</label>
                                <input type="checkbox" class="form-check-input" id="objectOutlineSwitch">
                        </div>
                </div>
                <h3>Storage & Recording</h3>
                <div>
                        <div class="mb-3">
                                <label for="sdRecordEnable" class="form-label">Enable SD Card Recording</label>
                                <input type="checkbox" class="form-check-input" id="sdRecordEnable">
                        </div>
                        <div class="mb-3">
                                <label for="sdRecordMode" class="form-label">Recording Mode</label><br>
                                <select class="form-select" id="sdRecordMode">
                                        <option value="0">Continuous</option>
                                        <option value="1">Motion-Triggered</option>
                                        <option value="2">Scheduled</option>
                                </select>
                        </div>
                </div>
                <h3>PTZ & Tracking</h3>
                <div>
                        <div class="mb-3">
                                <label for="patrolSwitch" class="form-label">Enable Patrol Mode</label>
                                <input type="checkbox" class="form-check-input" id="patrolSwitch">
                        </div>
                        <div class="mb-3">
                                <label for="trackEnable" class="form-label">Enable Auto-Tracking</label>
                                <input type="checkbox" class="form-check-input" id="trackEnable">
                        </div>
                        <div class="mb-3">
                                <label for="ptzSavePoint" class="form-label">PTZ Save Point</label>
                                <input type="text" class="form-control" id="ptzSavePoint" placeholder="147,119">
                        </div>
                        <div class="mb-3">
                                <label for="patrolMode" class="form-label">Patrol Mode</label><br>
                                <select class="form-select" id="patrolMode">
                                        <option value="0">Off</option>
                                        <option value="1">Preset-Based</option>
                                        <option value="2">Continuous</option>
                                </select>
                        </div>
                        <div class="mb-3">
                                <label for="presetNum" class="form-label">Number of Saved Positions</label>
                                <input type="number" class="form-control" id="presetNum" min="0" max="10">
                        </div>
                        <div class="mb-3">
                                <label for="preset" class="form-label">Preset Name</label>
                                <input type="text" class="form-control" id="preset" placeholder="Preset1">
                        </div>
                </div>
                <h3>Temperature Monitoring</h3>
                <div>
                        <div class="mb-3">
                                <label for="tempMaxEnable" class="form-label">Enable Maximum Temperature Monitoring</label>
                                <input type="checkbox" class="form-check-input" id="tempMaxEnable">
                        </div>
                        <div class="mb-3">
                                <label for="tempMaxCvalue" class="form-label">Maximum Temperature (°C)</label>
                                <input type="number" class="form-control" id="tempMaxCvalue" min="-50" max="100">
                        </div>
                        <div class="mb-3">
                                <label for="tempMaxFvalue" class="form-label">Maximum Temperature (°F)</label>
                                <input type="number" class="form-control" id="tempMaxFvalue" min="0" max="200">
                        </div>
                        <div class="mb-3">
                                <label for="tempMinEnable" class="form-label">Enable Minimum Temperature Monitoring</label>
                                <input type="checkbox" class="form-check-input" id="tempMinEnable">
                        </div>
                        <div class="mb-3">
                                <label for="tempMinCvalue" class="form-label">Minimum Temperature (°C)</label>
                                <input type="number" class="form-control" id="tempMinCvalue" min="-50" max="100">
                        </div>
                        <div class="mb-3">
                                <label for="tempMinFvalue" class="form-label">Minimum Temperature (°F)</label>
                                <input type="number" class="form-control" id="tempMinFvalue" min="0" max="200">
                        </div>
                        <div class="mb-3">
                                <label for="tempUnitSelect" class="form-label">Temperature Unit</label><br>
                                <select class="form-select" id="tempUnitSelect">
                                        <option value="0">Celsius (°C)</option>
                                        <option value="1">Fahrenheit (°F)</option>
                                </select>
                        </div>
                </div>
                <h3>Audio & Lullaby Function</h3>
                <div>
                        <div class="mb-3">
                                <label for="ipcLullabyControl" class="form-label">Lullaby Control</label><br>
                                <select class="form-select" id="ipcLullabyControl">
                                        <option value="0">Off</option>
                                        <option value="1">Play</option>
                                        <option value="2">Stop</option>
                                </select>
                        </div>
                        <div class="mb-3">
                                <label for="ipcLullabyList" class="form-label">Lullaby List</label><br>
                                <select class="form-select" id="ipcLullabyList">
                                        <option value="0">Lullaby 1</option>
                                        <option value="1">Lullaby 2</option>
                                        <option value="2">Lullaby 3</option>
                                        <option value="3">Lullaby 4</option>
                                </select>
                        </div>
                        <div class="mb-3">
                                <label for="ipcLlullabyMode" class="form-label">Lullaby Mode</label><br>
                                <select class="form-select" id="ipcLullabyMode">
                                        <option value="0">Single Play</option>
                                        <option value="1">Repeat</option>
                                </select>
                        </div>
                        <div class="mb-3">
                                <label for="ipcLullabyVolume" class="form-label">Lullaby Volume</label><br>
                                <select class="form-select" id="ipcLullabyVolume">
                                        <option value="0">Mute</option>
                                        <option value="1">Low</option>
                                        <option value="2">Medium</option>
                                        <option value="3">High</option>
                                </select>
                        </div>
                </div>
                <h3>Miscellaneous</h3>
                <div>
                        <div class="mb-3">
                                <label for="bulbEnable" class="form-label">Enable Light Bulb</label>
                                <input type="checkbox" class="form-check-input" id="bulbEnable">
                        </div>
                        <div class="mb-3">
                                <label for="cryDetectEnable" class="form-label">Enable Baby Cry Detection</label>
                                <input type="checkbox" class="form-check-input" id="cryDetectEnable">
                        </div>
                        <div class="mb-3">
                                <label for="sleepMode" class="form-label">Enable Sleep Mode</label>
                                <input type="checkbox" class="form-check-input" id="sleepMode">
                        </div>
                        <div class="mb-3">
                                <label for="customAlarmCtrl" class="form-label">Custom Alarm Control</label><br>
                                <select class="form-select" id="customAlarmCtrl">
                                        <option value="0">Off</option>
                                        <option value="1">Mode 1</option>
                                        <option value="2">Mode 2</option>
                                </select>
                        </div>
                        <div class="mb-3">
                                <label for="doorCtrl" class="form-label">Door Control</label><br>
                                <select class="form-select" id="doorCtrl">
                                        <option value="0">Locked</option>
                                        <option value="1">Unlocked</option>
                                </select>
                        </div>
                        <div class="mb-3">
                                <label for="flightWarnSwitch" class="form-label">Enable Flight Warning</label>
                                <input type="checkbox" class="form-check-input" id="flightWarnSwitch">
                        </div>
                        <div class="mb-3">
                                <label for="flightWarnTime" class="form-label">Flight Warning Time (Seconds)</label>
                                <input type="number" class="form-control" id="flightWarnTime" min="0" max="60">
                        </div>
                        <div class="mb-3">
                                <label for="floodlightLightness" class="form-label">Floodlight Brightness</label>
                                <input type="range" class="form-range" id="floodlightLightness" min="0" max="100">
                        </div>
                </div>
        </div>
        &nbsp;<br>
        <button type="button" id="saveSettings" class="btn btn-success w-100">Save Settings and Restart IPC</button>
    </div>

    <!-- Cam -->
    <div class="container-box d-none" id="containerCam">
        <div class="row">
            <div class="col-12">
                <h2 class="text-center" id="connecting">&nbsp;</h2>
                <h3 class="text-center" id="hostname">C o n n e c t i n g</h3>
                <div id="video-container" class="d-none">
                    <video id="hls-player" controls autoplay muted></video>
                </div>
                <div id="info-container" class="d-none text-center">
                    Camera: <span id="camera-name">unknown</span> | Hostname: <span id="camera-fqdn">unknown</span>
                </div>
                <div id="ptz-container" class="d-none">
                    <div id="motor-container" class="d-none">
                        <div id="motor-controls">
                            <div id="motor-left-container" class="motor-direction">
                                <button class="btn btn-primary w-25 ptz-button" id="ptz-left">&lArr;</button>
                            </div>
                            <div id="motor-updown-container" class="motor-direction">
                                <button class="btn btn-primary w-25 ptz-button" id="ptz-up">&uArr;</button>
                                <button class="btn btn-primary w-25 ptz-button" id="ptz-down">&dArr;</button>
                            </div>
                            <div id="motor-right-container" class="motor-direction">
                                <button class="btn btn-primary w-25 ptz-button" id="ptz-right">&rArr;</button>
                            </div>
                            <div id="ptz-slider-container">
                                <label for="ptz-speed">PTZ Distance per Click:</label>
                                <input type="range" id="ptz-dist" min="10" max="100" step="1" value="20">
                                <span id="ptz-dist-value">20</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Device-Control</h5>
                        <p class="card-text">Reboot device or restart IPC.</p>
                        <div class="text-center">
                                <button class="btn btn-danger" id="btn-reboot-now">Reboot Cam</button>
                                <button class="btn btn-warning" id="btn-restart-ipc">Restart IPC</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Local streams</h5>
                        <p class="card-text">Get a local stream address.</p>
                        <div class="text-center">
                                <button class="btn btn-success" id="btn-rtsp-local">Local RTSP</button>
                                <button class="btn btn-primary" id="btn-onvif-local">ONVIF</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Cloud streams</h5>
                        <p class="card-text">Get a cloud stream address.</p>
                        <div class="text-center">
                                <button class="btn btn-secondary" id="btn-rtsp-cloud">RTSP</button>
                                <button class="btn btn-secondary" id="btn-hls-cloud">HLS</button>
                                <button class="btn btn-secondary" id="btn-flv-cloud">FLV</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">CPU <span id="cpu-percent">0</span>% | RAM <span id="ram-percent">0</span>%</h5>
                        <div class="progress-container">
                            <span class="progress-label" id="cpu-label">Calculating...</span>
                            <div id="cpu-progress" class="progressbar"></div>
                        </div>
                        <div class="progress-container">
                            <span class="progress-label" id="ram-label">Calculating...</span>
                            <div id="ram-progress" class="progressbar"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-6">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title"><span id="sd-size"></span> SD-Card <span id="sd-percent">0</span>%</h5>
                        <div class="progress-container">
                            <span class="progress-label" id="sd1-label">Calculating...</span>
                            <div id="sd1-progress" class="progressbar"></div>
                        </div>
                        <div class="progress-container">
                            <span class="progress-label" id="sd2-label">Calculating...</span>
                            <div id="sd2-progress" class="progressbar"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Reboot dialog -->
    <div id="confirmDialog"></div>
            
    <!-- Bootstrap & jQuery Scripts -->
    <script src="/js/jquery-3.7.1.min.js"></script>
    <script src="/js/jquery-ui.min.js"></script>
    <script src="/js/bootstrap.bundle.min.js"></script>
    
    <!-- HLS Player -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

    <!-- LSCamoflash Script -->
    <script src="/js/lscamoflash.js"></script>
</body>
</html>
